# Безопасность деплоя

## ✅ Деплой безопасен!

### Что произойдет при деплое:

1. **Обновится только `index.html`** в `/var/www/tg-text.ru/public_html/`
   - Текущий файл на сервере будет заменен новой версией
   - Сайт продолжит работать без прерывания

2. **Служебные файлы НЕ попадут в public_html:**
   - ❌ `deploy.ps1` - останется только в репозитории
   - ❌ `nginx_tg-text.ru.conf` - останется только в репозитории  
   - ❌ `post-receive` - останется только в репозитории
   - ❌ `README.md`, `DEPLOY_GUIDE.md` - останутся только в репозитории
   - ❌ `SSL/` - останется только в репозитории

3. **Git hook обновится автоматически:**
   - После деплоя новый улучшенный hook будет установлен на сервере
   - В будущем он будет копировать только файлы сайта

### Текущее состояние:

**Локально (C:\tg):**
- 4 коммита в репозитории
- Все файлы проекта

**На сервере:**
- 1 коммит (Initial commit)
- Только `index.html` в `public_html/`

### Что будет после деплоя:

**На сервере:**
- 4 коммита (синхронизировано с локальным)
- Обновленный `index.html` в `public_html/`
- Обновленный Git hook `post-receive`
- Сайт продолжит работать без прерывания

## ⚠️ Важно знать:

1. **Nginx не перезапустится** - используется `systemctl reload` (graceful reload)
2. **Существующие файлы не удалятся** - только обновится `index.html`
3. **Конфигурация nginx не изменится** - она находится в `/etc/nginx/conf.d/`
4. **SSL сертификаты не затронутся** - они в `/etc/ssl/tg-text.ru/`

## Проверка перед деплоем:

```powershell
# Проверить что будет отправлено
git log --oneline
git diff production/main

# Проверить файлы в репозитории
git ls-files
```

## После деплоя:

```powershell
# Проверить что сайт работает
curl https://tg-text.ru

# Проверить что на сервере
ssh root@45.153.70.209 "ls -la /var/www/tg-text.ru/public_html/"
```

## Вывод:

✅ **Деплой безопасен!** Ничего не нарушится. Сайт обновится плавно без прерывания работы.

