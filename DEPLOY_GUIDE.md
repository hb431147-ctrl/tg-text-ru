# Руководство по деплою

## Где выполнять команду `.\deploy.ps1`

Команду нужно выполнять **в папке проекта** `C:\tg\` в PowerShell.

### Способ 1: Через PowerShell в папке проекта

```powershell
# Перейти в папку проекта
cd C:\tg

# Выполнить скрипт деплоя
.\deploy.ps1
```

### Способ 2: Через контекстное меню

1. Откройте проводник Windows
2. Перейдите в папку `C:\tg`
3. Правой кнопкой мыши на файле `deploy.ps1`
4. Выберите "Выполнить с PowerShell"

### Способ 3: Через полный путь

```powershell
C:\tg\deploy.ps1
```

## Что обновляется при деплое?

При выполнении `.\deploy.ps1` обновляется **вся папка проекта**, которая находится в Git репозитории:

- ✅ `index.html` - главная страница сайта
- ✅ `nginx_tg-text.ru.conf` - конфигурация nginx (если изменена)
- ✅ `post-receive` - Git hook (если изменен)
- ✅ `README.md` - документация
- ✅ Все файлы в папке `SSL/` (если изменены)
- ✅ Любые другие файлы, добавленные в Git

## Как это работает?

1. **Локально (C:\tg):**
   - Скрипт добавляет все измененные файлы в Git
   - Создает коммит с текущей датой и временем
   - Отправляет изменения на сервер через `git push`

2. **На сервере:**
   - Git hook `post-receive` автоматически запускается
   - Файлы копируются из репозитория в `/var/www/tg-text.ru/public_html/`
   - Nginx перезагружается без прерывания работы сайта

## Примеры использования

### Обновление только index.html

```powershell
cd C:\tg
# Отредактируйте index.html в редакторе
.\deploy.ps1
```

### Добавление новых файлов

```powershell
cd C:\tg
# Создайте новый файл, например style.css
git add style.css
git commit -m "Добавлен файл стилей"
.\deploy.ps1
```

### Обновление нескольких файлов

```powershell
cd C:\tg
# Отредактируйте нужные файлы
git add .
git commit -m "Обновлены файлы сайта"
.\deploy.ps1
```

## Важно!

- Скрипт должен выполняться из папки `C:\tg\`
- Все файлы должны быть добавлены в Git (`git add .`)
- Изменения должны быть закоммичены (`git commit`)
- После выполнения скрипта сайт обновится автоматически

## Проверка результата

После деплоя проверьте сайт:
- https://tg-text.ru
- https://www.tg-text.ru

Изменения должны появиться в течение нескольких секунд.

